#!/usr/bin/python
from gi.repository import (GObject as gobject, 
						   GnomeKeyring as gnomekeyring)

gobject.set_application_name("mutt")

def keyring(user="", host="", proto="imap"):
	if "@" not in user:
		user = user+"@gmail.com"

	if host in ("imap.gmail.com", "smtp.gmail.com"):
		result, values = gnomekeyring.find_network_password_sync(None, None, "www.google.com", None, None, None, 0)
	else:
		result, values = gnomekeyring.find_network_password_sync(user, None, host, None, proto, None, 0)
  
	return values[0].password
import sys
print keyring(*sys.argv[1:])
