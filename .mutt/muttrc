# Copyright (C) 2013 Julian Andres Klode
#
# Main configuration file. Generic options.
#

# Generic variables settings
set header_cache=~/.cache/mutt/headers
set message_cachedir=~/.cache/mutt/bodies
set certificate_file=~/.cache/mutt/certificates
set imap_idle=yes
set xterm_set_titles=yes
set timeout=15
set mail_check=600
set crypt_autosign=yes
set crypt_replysign=yes
set crypt_use_gpgme=yes
set sort='threads'
set sort_aux='last-date-received'
set index_format="%4C %Z %{%b %d} %-30.30L (%?l?%4l&%4c?) %s"
set reverse_name=yes
set imap_keepalive=900

# File formats
auto_view text/html application/pdf
alternative_order text/plain text/html

# Color settings
color index brightyellow black ~N
color index magenta black ~F
color index blue black ~T
color index red black ~D
color sidebar_new yellow default

# Key bindings
bind index <Ctrl><Up> sidebar-prev
bind pager <Esc><Up> sidebar-prev
bind index <Ctrl><Left> sidebar-prev
bind pager <Ctrl><Left> sidebar-prev
bind index <Ctrl><Down> sidebar-next
bind pager <Ctrl><Down> sidebar-prev
bind index <Ctrl><Right> sidebar-next
bind pager \CR sidebar-next
bind index \CP sidebar-prev
bind index \CN sidebar-next
bind index \CO sidebar-open
bind pager \CP sidebar-prev
bind pager \CN sidebar-next
bind pager \CO sidebar-open
bind index \C\r sidebar-open
bind index \C\n sidebar-open
macro index b '<enter-command>toggle sidebar_visible<enter>'
macro pager b '<enter-command>toggle sidebar_visible<enter>'
bind pager <Ctrl>A sidebar-open
bind index "i" imap-fetch-mail

# Mail view
ignore *
unignore Date From To CC List-Id Message-Id Subject Reply-To X-Debian-PR-Package User-Agent X-Mailer

# Accounts
macro index <f2> '<change-folder>imaps://imap.gmail.com:993/<enter>'
macro index <f3> '<change-folder>imaps://imap.mathematik.uni-marburg.de<enter>'
macro index <f4> '<change-folder>imaps://imap.students.uni-marburg.de<enter>'
macro pager <f2> '<change-folder>imaps://imap.gmail.com:993/<enter>'
macro pager <f3> '<change-folder>imaps://imap.mathematik.uni-marburg.de<enter>'
macro pager <f4> '<change-folder>imaps://imap.students.uni-marburg.de<enter>'

# Folder hooks
folder-hook 'gmail.com' 'source ~/.mutt/account.gmail'
folder-hook 'mathematik.uni-marburg.de' 'source ~/.mutt/account.math'
folder-hook 'students.uni-marburg.de' 'source ~/.mutt/account.students'

# Load default account (gmail; or the one specified in MUTT_ACCOUNT)
source `if [ -z $MUTT_ACCOUNT ]; then MUTT_ACCOUNT=gmail; fi; echo .mutt/account.$MUTT_ACCOUNT`
